<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
    <!--    <meta charset="UTF-8">-->
    <!--    <meta http-equiv="X-UA-Compatible" content="IE=edge">-->
    <!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
    <!--    <title>GU</title>-->
    <!--    <link rel="stylesheet" href="/assets/css/bootstrap.min.css">-->
    <!--    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.3/font/bootstrap-icons.css">-->
    <!--    <link rel="stylesheet" href="/assets/css/dataTables.bootstrap5.min.css">-->
    <!--    <link rel="stylesheet" href="/assets/css/style.css">-->

    <th:block th:include="dashboard/layout/head :: head "/>

</head>

<body>
<!-- navbar-->
<th:block th:insert="dashboard/layout/navbar :: navbar"/>
<!-- navbar-->

<main class="mt-5 pt-3">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <h4 id="tableOfContents">Dashboard</h4>
            </div>
        </div>
        <div class="row none-display">
            <div class="col-md-3 mb-3">
                <div class="card bg-primary text-white h-100">
                    <div class="card-body py-5">Doanh số theo năm</div>
                    <div class="card-footer d-flex">
                        View Details
                        <span class="ms-auto">
                                <i class="bi bi-chevron-right"></i>
                            </span>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card bg-warning text-dark h-100">
                    <div class="card-body py-5">Doanh số theo quý</div>
                    <div class="card-footer d-flex">
                        View Details
                        <span class="ms-auto">
                                <i class="bi bi-chevron-right"></i>
                            </span>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card bg-success text-white h-100">
                    <div class="card-body py-5">Doanh số theo tháng</div>
                    <div class="card-footer d-flex">
                        View Details
                        <span class="ms-auto">
                                <i class="bi bi-chevron-right"></i>
                            </span>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card bg-danger text-white h-100">
                    <div class="card-body py-5">Doanh số theo ngày</div>
                    <div class="card-footer d-flex">
                        View Details
                        <span class="ms-auto">
                                <i class="bi bi-chevron-right"></i>
                            </span>
                    </div>
                </div>
            </div>
        </div>

        <!-- chart -->


        <!-- chart -->

        <!--table-->
        <div class="row">
            <div class="col-md-12 mb-3">
                <div class="card">
                    <div class="card-header">
                        <span><i class="bi bi-table me-2"></i></span>
                    </div>
                    <div class="card-body">
                        <div>
                            <button type="button" class="btn btn-outline-success btn-add" style="text-align: center">
                                <i class="fas fa-plus"></i>
                                <label id="addContent">Add new product</label>
                            </button>
                        </div>
                        <br/>
                        <div class="table-responsive" id="div-table">
                            <table id="example" class="table table-striped data-table table-hover"
                                   style="width: 100%">
                                <thead class="t-head" id="tb-head" style="text-align: center">

                                </thead>

                                <tbody id="tb-show">

                                </tbody>

                                <tfoot id="tb-footer" style="text-align: center">

                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--table-->
</main>
<footer>

</footer>

<div class="loader hide"></div>

<th:block th:insert="/dashboard/products/temp-option :: temp-option"/>

<th:block th:insert="/dashboard/products/modalCreateProduct :: modal-create-product"/>

<th:block th:insert="/dashboard/products/modalUpdateProduct :: modal-update-product"/>

<th:block th:insert="/dashboard/products/table-product :: temp-products"/>

<th:block th:insert="/dashboard/products/table-product-lock :: temp-products-lock"/>

<th:block th:insert="/dashboard/products/table-category :: temp-categories"/>

<th:block th:insert="/dashboard/products/table-category-lock :: temp-categories-lock"/>

<th:block th:insert="/dashboard/products/table-subcategory :: temp-subcategory"/>

<th:block th:insert="/dashboard/products/table-subcategory-lock :: temp-subcategory-lock"/>

<th:block th:insert="/dashboard/products/modalCreateCategory :: modal-create-category"/>

<th:block th:insert="/dashboard/products/modalUpdateCategory :: modal-update-category"/>

<th:block th:insert="/dashboard/products/modalCreateSubcategory :: modal-create-subcategory"/>

<th:block th:insert="/dashboard/products/modalUpdateSubcategory :: modal-update-subcategory"/>

<th:block th:insert="/dashboard/products/modalCreateProductCombination :: modal-create-products-combination"/>

<th:block th:insert="/dashboard/products/modalUpdateProductsCombination :: modal-update-products-combination"/>

<th:block th:insert="/dashboard/products/table-stocks :: temp-products-stocks"/>

<th:block th:insert="/dashboard/products/table-stocks-lock :: temp-products-stocks-lock"/>

<th:block th:include="/dashboard/layout/scripts :: script"/>

<script src="/assets/js/App.js"></script>

<script>


    let page = {
        urls: {
            getColor: "http://localhost:8086/api/stock/showAllColor",
            getSize: "http://localhost:8086/api/stock/showAllSize",
            getProductById: "http://localhost:8086/api/product/getProductById/",
            getAllProduct: "http://localhost:8086/api/product/showAll",
            getAllProductLock: "http://localhost:8086/api/product/showAllLock",
            getAllProductByCategoryId: "http://localhost:8086/api/product/showProductByCategoryId/",
            getCategoryById: "http://localhost:8086/api/category/findById/",
            getAllCategory: "http://localhost:8086/api/category/showAllCategory",
            getAllCategoryLock: "http://localhost:8086/api/category/getAllCategoryLock/",
            getAllProductsStock: "http://localhost:8086/api/stock/showAllProductsCombination",
            getAllProductsCombinationLock: "http://localhost:8086/api/stock/showAllProductsCombinationLock/",
            findProductsCombinationById: "http://localhost:8086/api/stock/findById/",
            getAllSubcategory: "http://localhost:8086/api/subcategory/showAllSubcategory",
            getAllSubcategoryByCategoryId: "http://localhost:8086/api/subcategory/showAllSubcategoryByCategory_id/",
            getAllSubcategoryLock: "http://localhost:8086/api/subcategory/showAllSubcategoryLock/",
            getSubcategoryById: "http://localhost:8086/api/subcategory/findById/",
            doCreateProduct: "http://localhost:8086/api/product/createProduct",
            doCreateProductNoImage: "http://localhost:8086/api/product/createProductNoImage",
            doUpdateProduct: "http://localhost:8086/api/product/updateProduct/",
            doUpdateProductNoImage: "http://localhost:8086/api/product/updateProductNoImage/",
            doSuspensionProduct: "http://localhost:8086/api/product/suspensionProduct/",
            doRestoreProduct: "http://localhost:8086/api/product/doRestoreProduct/",
            createCategory: "http://localhost:8086/api/category/createCategory",
            doUpdateCategory: "http://localhost:8086/api/category/updateCategory/",
            doSuspensionCategory: "http://localhost:8086/api/category/suspensionCategory/",
            doRestoreCategory: "http://localhost:8086/api/category/doRestoreCategory/",
            createSubcategory: "http://localhost:8086/api/subcategory/createSubcategory",
            doUpdateSubcategory: "http://localhost:8086/api/subcategory/editSubcategory/",
            doSuspensionSubcategory: "http://localhost:8086/api/subcategory/suspensionSubcategory/",
            doRestoreSubcategory: "http://localhost:8086/api/subcategory/doRestoreSubcategory/",
            doCreateProductCombination: "http://localhost:8086/api/stock/createProductsCombination",
            doCreateProductCombinationNoImage: "http://localhost:8086/api/stock/createProductsCombinationNoImage/",
            doUpdateProductCombinationNoImage: "http://localhost:8086/api/stock/updateProductsCombinationNoImage/",
            doUpdateProductCombination: "http://localhost:8086/api/stock/updateProductsCombination/",
            getAllProductsCombinationByProductId: "http://localhost:8086/api/stock/showProductsCombinationByProductId/"

        },
        element: {},
        commands: {},
        loadData: {},
        dialogs: {
            element: {},
            commands: {}
        }
    }

    let product = new Product();

    let productsCombination = new ProductsCombination();

    let category = new Category();

    let subcategory = new Subcategory();

    let color = new Color();

    let size = new Size();

    let tempProduct = $.validator.format($.trim($("#tempProduct").val()));

    let tempProductLock = $.validator.format($.trim($("#tempProductLock").val()));

    let tempProductsCombination = $.validator.format($.trim($("#tempProductsStock").val()));

    let tempProductsCombinationLock = $.validator.format($.trim($("#tempProductsStockLock").val()));

    let tempCategory = $.validator.format($.trim($("#tempCategories").val()));

    let tempCategoryLock = $.validator.format($.trim($("#tempCategoriesLock").val()));

    let tempSubcategory = $.validator.format($.trim($("#tempSubcategories").val()));

    let tempSubcategoryLock = $.validator.format($.trim($("#tempSubcategoriesLock").val()));

    let tempOption = $.validator.format($.trim($("#tempOption").val()));

    let addRowProduct = () => {

        let image_thumbnail = App.BASE_URL_CLOUD_IMAGE + "/" + App.BASE_SCALE_IMAGE + "/" + product.fileFolder + "/" + product.fileName;

        $("#tb-show").prepend($(tempProduct(product.id, product.title, product.category_name, product.subcategory_name, product.description, image_thumbnail)));
    }

    let addRowProductLock = () => {
        let image_thumbnail = App.BASE_URL_CLOUD_IMAGE + "/" + App.BASE_SCALE_IMAGE + "/" + product.fileFolder + "/" + product.fileName;

        $("#tb-show").prepend($(tempProductLock(product.id, product.title, product.category_name, product.subcategory_name, product.description, image_thumbnail)));
    }

    let addRowProductCombination = () => {
        let image_thumbnail = App.BASE_URL_CLOUD_IMAGE + "/" + App.BASE_SCALE_IMAGE + "/" + productsCombination.fileFolder + "/" + productsCombination.fileName;

        $("#tb-show").prepend($(tempProductsCombination(productsCombination.id, productsCombination.combination_string, productsCombination.product_title,
            productsCombination.total_stock, formatMoney(productsCombination.unit_price), formatMoney(productsCombination.maximum_retail_price), image_thumbnail)));
    }

    let addRowProductCombinationLock = () => {
        let image_thumbnail = App.BASE_URL_CLOUD_IMAGE + "/" + App.BASE_SCALE_IMAGE + "/" + productsCombination.fileFolder + "/" + productsCombination.fileName;

        $("#tb-show").prepend($(tempProductsCombinationLock(productsCombination.id, productsCombination.combination_string, productsCombination.product_title,
            productsCombination.total_stock, formatMoney(productsCombination.unit_price), formatMoney(productsCombination.maximum_retail_price), image_thumbnail)));
    }

    let addRowCategory = () => {
        $("#tb-show").prepend($(tempCategory(category.id, category.category_name, category.quantity_product)));
    }

    let addRowCategoryLock = () => {
        $("#tb-show").prepend($(tempCategoryLock(category.id, category.category_name, category.quantity_product)));
    }

    let addRowSubcategory = () => {
        $("#tb-show").prepend($(tempSubcategory(subcategory.id, subcategory.subcategoryName, subcategory.categoryName)));
    }

    let addRowSubcategoryLock = () => {
        $("#tb-show").prepend($(tempSubcategoryLock(subcategory.id, subcategory.subcategoryName, subcategory.categoryName)));

    }

    let addRowOption = (element, id, name) => {
        $(element).prepend($(tempOption(id, name)));
    }


    function findProductById(id) {
        return $.ajax({
            type: "GET",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.getProductById + id
        })
            .done(function (data) {
                product = data;
            })
            .fail(function (jqXHR) {
                console.log("Error findById: " + jqXHR);
            })
    }

    function findCategoryById(id) {
        return $.ajax({
            type: "GET",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.getCategoryById + id
        })
            .done(function (data) {
                category = data;
            })
    }

    function findSubcategoryById(id) {
        return $.ajax({
            type: "GET",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.getSubcategoryById + id,
        })
            .done(function (data) {
                subcategory = data;
            })
            .fail(function (jqXHR) {
                console.log(jqXHR);
                App.SweetAlert.showErrorAlert("Can not find subcategory")

            })
    }

    function findProductsCombinationById(id) {
        return $.ajax({
            type: "GET",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.findProductsCombinationById + id
        })
            .done(function (data) {
                productsCombination = data
            })
            .fail(function (jqXHR) {
                console.log(jqXHR);

                App.SweetAlert.showErrorAlert("Can not find this variable!!!");
            })

    }


    function drawCategory(element) {
        return $.ajax({
            type: "GET",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.getAllCategory
        })
            .done(function (data) {
                $(element).empty();
                console.log(data);
                data.forEach(item => {
                    category = item;
                    console.log(category);
                    // $("#optionCategory").html(`<option value="${category.id}">(${category.id}) ${category.categoryName}</option>`)
                    addRowOption(element, category.id, category.category_name);
                })
            })
            .fail(function (jqXHR) {
                console.log(jqXHR);
                App.IziToast.showErrorAlert("Can draw category")
            })
    }

    function drawSubCategory(element, elementCategory) {
        category.id = $(elementCategory).val();
        return $.ajax({
            type: "GET",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.getAllSubcategoryByCategoryId + category.id
        })
            .done(function (data) {
                console.log(data);
                $(element).empty();
                data.forEach(item => {
                    subcategory = item;
                    addRowOption(element, subcategory.id, subcategory.subcategoryName);
                })
            })
            .fail(function (jqXHR) {
                console.log(jqXHR);
                $(element).empty();
                App.SweetAlert.showErrorAlert("Subcategory does not exist!!!")
            })
    }

    function drawColor(element) {
        return $.ajax({
            type: "GET",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.getColor
        })
            .done(function (data) {
                data.forEach(item => {
                    color = item;
                    addRowOption(element, color.id, color.color_name);
                })
            })
            .fail(function (jqXHR) {
                console.log(jqXHR);
                App.IziToast.showErrorAlert("Can not load color")
            })
    }

    function drawSize(element) {
        return $.ajax({
            type: "GET",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.getSize
        })
            .done(function (data) {
                data.forEach(item => {
                    size = item;
                    addRowOption(element, size.id, size.size_name);
                })
            })
            .fail(function (jqXHR) {
                console.log(jqXHR);

                App.IziToast.showErrorAlert("Can not load size")
            })
    }

    function loadProduct() {
        return $.ajax({
            type: "GET",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.getAllProduct,
        })
            .done(function (data) {
                $("#div-table").html("");

                $("#div-table").html(` <table id="example" class="table table-striped data-table table-hover"
                                   style="width: 100%">
                                <thead class="t-head" id="tb-head">

                                </thead>

                                <tbody id="tb-show">

                                </tbody>

                                <tfoot id="tb-footer" style="text-align: center">

                                </tfoot>
                            </table>`);

                $("#tableOfContents").html("Products");

                $(".btn-add").attr("id", "createProduct");

                $(".btn-add").removeClass("hide");

                $("#addContent").html("Add new product");

                $("#tb-show").html("");
                $("#tb-head").html(" <tr>\n" +
                    "                          <th class='text-center'>Title</th>\n" +
                    "                          <th class='text-center'>Category</th>\n" +
                    "                          <th class='text-center'>Subcategory</th>\n" +
                    "                          <th class='text-center'>Description</th>\n" +
                    "                          <th class='text-center'>Image</th>\n" +
                    "                          <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>");

                $("#tb-footer").html("  <tr style=\"text-align: center\">\n" +
                    "                                    <th class='text-center'>Title</th>\n" +
                    "                                    <th class='text-center'>Category</th>\n" +
                    "                                    <th class='text-center'>Subcategory</th>\n" +
                    "                                    <th class='text-center'>Description</th>\n" +
                    "                                    <th class='text-center'>Image</th>\n" +
                    "                                    <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>")
                data.forEach(item => {
                    product = item;
                    addRowProduct();
                })

                $("#example").DataTable()

            })
            .fail(function (jqXHR) {
                $("#tableOfContents").html("Products");

                $(".btn-add").attr("id", "createProduct");

                $(".btn-add").removeClass("hide");

                $("#addContent").html("Add new product");

                $("#tb-show").html("");
                $("#tb-head").html(" <tr style=\"text-align: center\">\n" +
                    "                          <th class='text-center'>Title</th>\n" +
                    "                          <th class='text-center'>Category</th>\n" +
                    "                          <th class='text-center'>Subcategory</th>\n" +
                    "                          <th class='text-center'>Description</th>\n" +
                    "                          <th class='text-center'>Image</th>\n" +
                    "                          <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>");

                $("#tb-footer").html("  <tr style=\"text-align: center\">\n" +
                    "                                    <th class='text-center'>Title</th>\n" +
                    "                                    <th class='text-center'>Category</th>\n" +
                    "                                    <th class='text-center'>Subcategory</th>\n" +
                    "                                    <th class='text-center'>Description</th>\n" +
                    "                                    <th class='text-center'>Image</th>\n" +
                    "                                    <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>")
                console.log(jqXHR);
                App.SweetAlert.showErrorAlert("Can not found product!!!");
                handleGroupModal();
            })
    }

    function loadProductLock() {
        return $.ajax({
            type: "GET",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.getAllProductLock
        })
            .done(function (data) {
                $("#div-table").html("");

                $("#div-table").html(` <table id="example" class="table table-striped data-table table-hover"
                                   style="width: 100%">
                                <thead class="t-head" id="tb-head">

                                </thead>

                                <tbody id="tb-show">

                                </tbody>

                                <tfoot id="tb-footer" style="text-align: center">

                                </tfoot>
                            </table>`)

                $("#tableOfContents").html("Products");

                $(".btn-add").attr("id", "createProduct");

                $(".btn-add").removeClass("hide");

                $("#addContent").html("Add new product");

                $("#tb-show").html("");
                $("#tb-head").html(" <tr>\n" +
                    "                          <th class='text-center'>Title</th>\n" +
                    "                          <th class='text-center'>Category</th>\n" +
                    "                          <th class='text-center'>Subcategory</th>\n" +
                    "                          <th class='text-center'>Description</th>\n" +
                    "                          <th class='text-center'>Image</th>\n" +
                    "                          <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>");

                $("#tb-footer").html("  <tr style=\"text-align: center\">\n" +
                    "                                    <th class='text-center'>Title</th>\n" +
                    "                                    <th class='text-center'>Category</th>\n" +
                    "                                    <th class='text-center'>Subcategory</th>\n" +
                    "                                    <th class='text-center'>Description</th>\n" +
                    "                                    <th class='text-center'>Image</th>\n" +
                    "                                    <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>")

                data.forEach(item => {
                    product = item;
                    addRowProductLock();
                });

                $("#example").DataTable();

            })
            .fail(function (jqXHR) {

                console.log(jqXHR);

                $("#tableOfContents").html("Products");

                $(".btn-add").attr("id", "createProduct");

                $(".btn-add").removeClass("hide");

                $("#addContent").html("Add new product");

                $("#tb-show").html("");
                $("#tb-head").html(" <tr>\n" +
                    "                          <th class='text-center'>Title</th>\n" +
                    "                          <th class='text-center'>Category</th>\n" +
                    "                          <th class='text-center'>Subcategory</th>\n" +
                    "                          <th class='text-center'>Description</th>\n" +
                    "                          <th class='text-center'>Image</th>\n" +
                    "                          <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>");

                $("#tb-footer").html("  <tr style=\"text-align: center\">\n" +
                    "                                    <th class='text-center'>Title</th>\n" +
                    "                                    <th class='text-center'>Category</th>\n" +
                    "                                    <th class='text-center'>Subcategory</th>\n" +
                    "                                    <th class='text-center'>Description</th>\n" +
                    "                                    <th class='text-center'>Image</th>\n" +
                    "                                    <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>")
                App.SweetAlert.showErrorAlert("Can not load product lock!!!")
            })
    }

    function loadProductByCategoryId(id) {
        return $.ajax({
            type: "GET",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.getAllProductByCategoryId + id
        })
            .done(function (data) {
                $("#div-table").html("");

                $("#div-table").html(` <table id="example" class="table table-striped data-table table-hover"
                                   style="width: 100%">
                                <thead class="t-head" id="tb-head">

                                </thead>

                                <tbody id="tb-show">

                                </tbody>

                                <tfoot id="tb-footer" style="text-align: center">

                                </tfoot>
                            </table>`)

                $("#tableOfContents").html("Products");

                $(".btn-add").attr("id", "createProduct");

                $(".btn-add").removeClass("hide");

                $("#addContent").html("Add new product");

                $("#tb-show").html("");
                $("#tb-head").html(" <tr>\n" +
                    "                          <th class='text-center'>Title</th>\n" +
                    "                          <th class='text-center'>Category</th>\n" +
                    "                          <th class='text-center'>Subcategory</th>\n" +
                    "                          <th class='text-center'>Description</th>\n" +
                    "                          <th class='text-center'>Image</th>\n" +
                    "                          <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>");

                $("#tb-footer").html("  <tr style=\"text-align: center\">\n" +
                    "                                    <th class='text-center'>Title</th>\n" +
                    "                                    <th class='text-center'>Category</th>\n" +
                    "                                    <th class='text-center'>Subcategory</th>\n" +
                    "                                    <th class='text-center'>Description</th>\n" +
                    "                                    <th class='text-center'>Image</th>\n" +
                    "                                    <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>")

                data.forEach(item => {
                    product = item;
                    addRowProductLock();
                });

                $("#example").DataTable();
            })
            .fail(function (jqXHR) {
                $("#tableOfContents").html("Products");

                $(".btn-add").attr("id", "createProduct");

                $(".btn-add").removeClass("hide");

                $("#addContent").html("Add new product");

                $("#tb-show").html("");
                $("#tb-head").html(" <tr style=\"text-align: center\">\n" +
                    "                          <th class='text-center'>Title</th>\n" +
                    "                          <th class='text-center'>Category</th>\n" +
                    "                          <th class='text-center'>Subcategory</th>\n" +
                    "                          <th class='text-center'>Description</th>\n" +
                    "                          <th class='text-center'>Image</th>\n" +
                    "                          <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>");

                $("#tb-footer").html("  <tr style=\"text-align: center\">\n" +
                    "                                    <th class='text-center'>Title</th>\n" +
                    "                                    <th class='text-center'>Category</th>\n" +
                    "                                    <th class='text-center'>Subcategory</th>\n" +
                    "                                    <th class='text-center'>Description</th>\n" +
                    "                                    <th class='text-center'>Image</th>\n" +
                    "                                    <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>")
                console.log(jqXHR);
                App.SweetAlert.showErrorAlert("Can not found product!!!");
            })
    }

    function loadCategory() {
        return $.ajax({
            type: "GET",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.getAllCategory,
        })
            .done(function (data) {
                $("#div-table").html("");

                $("#div-table").html(` <table id="example" class="table table-striped data-table table-hover"
                                   style="width: 100%">
                                <thead class="t-head" id="tb-head">

                                </thead>

                                <tbody id="tb-show">

                                </tbody>

                                <tfoot id="tb-footer" style="text-align: center">

                                </tfoot>
                            </table>`);

                $("#tableOfContents").html("CATEGORIES");

                $(".btn-add").attr("id", "createCategory");

                $(".btn-add").removeClass("hide");

                $("#addContent").html("Add new category");

                $("#tb-show").html("");
                $("#tb-head").html("  <tr style='text-align: center'>\n" +
                    "                                    <th class='text-center'>#</th>\n" +
                    "                                    <th class='text-center'>Category</th>\n" +
                    "                                    <th class='text-center'>Quantity product</th>\n" +
                    "                                    <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>");

                $("#tb-footer").html("  <tr style='text-align: center'>\n" +
                    "                                    <th class='text-center'>#</th>\n" +
                    "                                    <th class='text-center'>Category</th>\n" +
                    "                                    <th class='text-center'>Quantity product</th>\n" +
                    "                                    <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>")
                data.forEach(item => {
                    category = item;
                    addRowCategory();
                })

                $("#example").DataTable()

            })
            .fail(function (jqXHR) {
                $("#tableOfContents").html("CATEGORIES");

                $(".btn-add").attr("id", "createCategory");

                $(".btn-add").removeClass("hide");

                $("#addContent").html("Add new category");

                $("#tb-show").html("");


                $("#tb-head").html("  <tr style='text-align: center'>\n" +
                    "                                    <th class='text-center'>#</th>\n" +
                    "                                    <th class='text-center'>Category</th>\n" +
                    "                                    <th class='text-center'>Quantity product</th>\n" +
                    "                                    <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>");

                $("#tb-footer").html("  <tr style='text-align: center'>\n" +
                    "                                    <th class='text-center'>#</th>\n" +
                    "                                    <th class='text-center'>Category</th>\n" +
                    "                                    <th class='text-center'>Quantity product</th>\n" +
                    "                                    <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>")
                console.log(jqXHR);
                App.SweetAlert.showErrorAlert("No category in list!!");
            })
    }

    function loadCategoryLock() {
        return $.ajax({
            type: "GET",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.getAllCategoryLock,
        })
            .done(function (data) {
                $("#div-table").html("");

                $("#div-table").html(` <table id="example" class="table table-striped data-table table-hover"
                                   style="width: 100%">
                                <thead class="t-head" id="tb-head">

                                </thead>

                                <tbody id="tb-show">

                                </tbody>

                                <tfoot id="tb-footer" style="text-align: center">

                                </tfoot>
                            </table>`)

                $("#tableOfContents").html("CATEGORIES LOCK");
                // Quang required cment
                $(".btn-add").addClass("hide");

                $("#tb-show").html("");

                $("#tb-head").html("  <tr style='text-align: center'>\n" +
                    "                                    <th class='text-center'>#</th>\n" +
                    "                                    <th class='text-center'>Category</th>\n" +
                    "                                    <th class='text-center'>Quantity product</th>\n" +
                    "                                    <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>");

                $("#tb-footer").html("  <tr style='text-align: center'>\n" +
                    "                                    <th class='text-center'>#</th>\n" +
                    "                                    <th class='text-center'>Category</th>\n" +
                    "                                    <th class='text-center'>Quantity product</th>\n" +
                    "                                    <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>")
                data.forEach(item => {
                    category = item;

                    addRowCategoryLock();
                })
                $("#example").DataTable();

            })
            .fail(function (jqXHR) {
                $("#tableOfContents").html("CATEGORIES LOCK");

                $(".btn-add").addClass("hide");

                $("#tb-show").html("");

                $("#tb-head").html("  <tr style='text-align: center'>\n" +
                    "                                    <th class='text-center'>#</th>\n" +
                    "                                    <th class='text-center'>Category</th>\n" +
                    "                                    <th class='text-center'>Quantity product</th>\n" +
                    "                                    <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>");

                $("#tb-footer").html("  <tr style='text-align: center'>\n" +
                    "                                    <th class='text-center'>#</th>\n" +
                    "                                    <th class='text-center'>Category</th>\n" +
                    "                                    <th class='text-center'>Quantity product</th>\n" +
                    "                                    <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>")
                console.log(jqXHR);
                App.SweetAlert.showErrorAlert("No category in list!!");
            })
    }

    function loadSubcategory() {
        return $.ajax({
            type: "GET",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.getAllSubcategory,
        })
            .done(function (data) {
                $("#div-table").html("");

                $("#div-table").html(` <table id="example" class="table table-striped data-table table-hover"
                                   style="width: 100%">
                                <thead class="t-head" id="tb-head">

                                </thead>

                                <tbody id="tb-show">

                                </tbody>

                                <tfoot id="tb-footer" style="text-align: center">

                                </tfoot>
                            </table>`)

                $("#tableOfContents").html("SUBCATEGORIES");

                $(".btn-add").attr("id", "createSubcategory");

                $(".btn-add").removeClass("hide");

                $("#addContent").html("Add new subcategory");

                $("#tb-show").html("");
                $("#tb-head").html(`  <tr style='text-align: center'>\n" +
                    "                                    <th class='text-center'>#</th>\n" +
                    "                                    <th class='text-center'>Subcategory</th>\n" +
                    "                                    <th class='text-center'>Category</th>\n" +
                    "                                    <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>`);

                $("#tb-footer").html(`  <tr style='text-align: center'>\n" +
                    "                                    <th class='text-center'>#</th>\n" +
                    "                                    <th class='text-center'>Subcategory</th>\n" +
                    "                                    <th class='text-center'>Category</th>\n" +
                    "                                    <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>`)
                data.forEach(item => {
                    subcategory = item;
                    addRowSubcategory();
                })

                $("#example").DataTable();
            })
            .fail(function (jqXHR) {
                $("#tableOfContents").html("SUBCATEGORIES");

                $(".btn-add").attr("id", "createSubcategory");

                $(".btn-add").removeClass("hide");

                $("#addContent").html("Add new subcategory");

                console.log(jqXHR);
                $("#tb-show").html("");
                $("#tb-head").html("  <tr style='text-align: center'>\n" +
                    "                                    <th class='text-center'>#</th>\n" +
                    "                                    <th class='text-center'>Subcategory</th>\n" +
                    "                                    <th class='text-center'>Category</th>\n" +
                    "                                    <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>");

                $("#tb-footer").html("  <tr style='text-align: center'>\n" +
                    "                                    <th class='text-center'>#</th>\n" +
                    "                                    <th class='text-center'>Subcategory</th>\n" +
                    "                                    <th class='text-center'>Category</th>\n" +
                    "                                    <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>")
                App.SweetAlert.showErrorAlert("Can not load list subcategories")
            })
    }

    function loadSubcategoryLock() {
        return $.ajax({
            type: "GET",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.getAllSubcategoryLock
        })
            .done(function (data) {
                $("#div-table").html("");

                $("#div-table").html(` <table id="example" class="table table-striped data-table table-hover"
                                   style="width: 100%">
                                <thead class="t-head" id="tb-head">

                                </thead>

                                <tbody id="tb-show">

                                </tbody>

                                <tfoot id="tb-footer" style="text-align: center">

                                </tfoot>
                            </table>`)

                $("#tableOfContents").html("SUBCATEGORIES LOCK");

                $(".btn-add").addClass("hide");

                $("#tb-show").html("");
                $("#tb-head").html(`  <tr style='text-align: center'>\n" +
                    "                                    <th class='text-center'>#</th>\n" +
                    "                                    <th class='text-center'>Subcategory</th>\n" +
                    "                                    <th class='text-center'>Category</th>\n" +
                    "                                    <th class='text-center'>Action</th>\n" +
                    "                                </tr>`);

                $("#tb-footer").html(`  <tr style='text-align: center'>\n" +
                    "                                    <th class='text-center'>#</th>\n" +
                    "                                    <th class='text-center'>Subcategory</th>\n" +
                    "                                    <th class='text-center'>Category</th>\n" +
                    "                                    <th class='text-center'>Action</th>\n" +
                    "                                </tr>`)
                data.forEach(item => {
                    subcategory = item;
                    addRowSubcategoryLock();
                })

                $("#example").DataTable();
            })
            .fail(function (jqXHR) {
                $("#tableOfContents").html("SUBCATEGORIES LOCK");

                $(".btn-add").addClass("hide");

                $("#addContent").html("Add new subcategory");

                console.log(jqXHR);
                $("#tb-show").html("");
                $("#tb-head").html("  <tr style='text-align: center'>\n" +
                    "                                    <th class='text-center'>#</th>\n" +
                    "                                    <th class='text-center'>Subcategory</th>\n" +
                    "                                    <th class='text-center'>Category</th>\n" +
                    "                                    <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>");

                $("#tb-footer").html("  <tr style='text-align: center'>\n" +
                    "                                    <th class='text-center'>#</th>\n" +
                    "                                    <th class='text-center'>Subcategory</th>\n" +
                    "                                    <th class='text-center'>Category</th>\n" +
                    "                                    <th style=\"text-align: center \">Action</th>\n" +
                    "                                </tr>")
                App.SweetAlert.showErrorAlert("Can not load list subcategories")
            })
    }

    function loadProductsStock() {
        return $.ajax({
            type: "GET",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.getAllProductsStock
        })
            .done(function (data) {
                $("#div-table").html("");

                $("#div-table").html(` <table id="example" class="table table-striped data-table table-hover"
                                   style="width: 100%">
                                <thead class="t-head" id="tb-head">

                                </thead>

                                <tbody id="tb-show">

                                </tbody>

                                <tfoot id="tb-footer" style="text-align: center">

                                </tfoot>
                            </table>`)

                $("#tableOfContents").html("Product stock");

                $(".btn-add").attr("id", "createSubcategory");

                $(".btn-add").addClass("hide");

                $("#addContent").html("Add new subcategory");

                $("#tb-show").html("");
                $("#tb-head").html(`<tr>
                                        <th class='text-center'>Name variable</th>
                                        <th class='text-center'>Title product</th>
                                        <th class='text-center'>Total stock</th>
                                        <th class='text-center'>Unit price</th>
                                        <th class='text-center'>MRP</th>
                                        <th class='text-center'>Image</th>
                                        <th colspan="1">Action</th>
                                    </tr>`);

                $("#tb-footer").html(`<tr>
                                        <th class='text-center'>Name variable</th>
                                        <th class='text-center'>Title product</th>
                                        <th class='text-center'>Total stock</th>
                                        <th class='text-center'>Unit price</th>
                                        <th class='text-center'>MRP</th>
                                        <th class='text-center'>Image</th>
                                        <th>Action</th>
                                    </tr>`)

                data.forEach(item => {
                    console.log(item)
                    productsCombination = item;

                    addRowProductCombination();
                })

                $("#example").DataTable();

            })
            .fail(function (jxQHR) {

                $("#tableOfContents").html("Product stock");

                $(".btn-add").attr("id", "createSubcategory");

                $(".btn-add").addClass("hide");

                $("#addContent").html("Add new subcategory");
                console.log(jxQHR)
                $("#tb-show").html("");
                $("#tb-head").html(`<tr>
                                        <th class='text-center'>Name variable</th>
                                        <th class='text-center'>Title product</th>
                                        <th class='text-center'>Total stock</th>
                                        <th class='text-center'>Unit price</th>
                                        <th class='text-center'>MRP</th>
                                        <th class='text-center'>Image</th>
                                        <th colspan="1">Action</th>
                                    </tr>`);

                $("#tb-footer").html(`<tr>
                                        <th class='text-center'>Name variable</th>
                                        <th class='text-center'>Title product</th>
                                        <th class='text-center'>Total stock</th>
                                        <th class='text-center'>Unit price</th>
                                        <th class='text-center'>MRP</th>
                                        <th class='text-center'>Image</th>
                                        <th colspan="1">Action</th>
                                    </tr>`)

                App.SweetAlert.showErrorAlert("Can not load stock")
            })
    }

    function loadProductStockByProductId(id) {
        return $.ajax({
            type: "GET",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.getAllProductsCombinationByProductId + id
        })
            .done(function (data) {
                $("#div-table").html("");

                $("#div-table").html(` <table id="example" class="table table-striped data-table table-hover"
                                   style="width: 100%">
                                <thead class="t-head" id="tb-head">

                                </thead>

                                <tbody id="tb-show">

                                </tbody>

                                <tfoot id="tb-footer" style="text-align: center">

                                </tfoot>
                            </table>`)

                $("#tableOfContents").html("Product stock");

                $(".btn-add").attr("id", "createSubcategory");

                $(".btn-add").addClass("hide");

                $("#addContent").html("Add new subcategory");

                $("#tb-show").html("");
                $("#tb-head").html(`<tr>
                                        <th class='text-center'>Name variable</th>
                                        <th class='text-center'>Title product</th>
                                        <th class='text-center'>Total stock</th>
                                        <th class='text-center'>Unit price</th>
                                        <th class='text-center'>MRP</th>
                                        <th class='text-center'>Image</th>
                                        <th class='text-center'>Action</th>
                                    </tr>`);

                $("#tb-footer").html(`<tr>
                                        <th class='text-center'>Name variable</th>
                                        <th class='text-center'>Title product</th>
                                        <th class='text-center'>Total stock</th>
                                        <th class='text-center'>Unit price</th>
                                        <th class='text-center'>MRP</th>
                                        <th class='text-center'>Image</th>
                                        <th class='text-center'>Action</th>
                                    </tr>`)

                data.forEach(item => {
                    productsCombination = item;

                    addRowProductCombination();
                })
                $("#example").DataTable();
            })
            .fail(function (jqXHR) {
                console.log(jqXHR);

                $("#div-table").html("");

                $("#div-table").html(` <table id="example" class="table table-striped data-table table-hover"
                                   style="width: 100%">
                                <thead class="t-head" id="tb-head">

                                </thead>

                                <tbody id="tb-show">

                                </tbody>

                                <tfoot id="tb-footer" style="text-align: center">

                                </tfoot>
                            </table>`)

                $("#tableOfContents").html("Product stock");

                $(".btn-add").attr("id", "createSubcategory");

                $(".btn-add").addClass("hide");

                $("#addContent").html("Add new subcategory");

                $("#tb-show").html("");
                $("#tb-head").html(`<tr>
                                        <th class='text-center'>Name variable</th>
                                        <th class='text-center'>Title product</th>
                                        <th class='text-center'>Total stock</th>
                                        <th class='text-center'>Unit price</th>
                                        <th class='text-center'>MRP</th>
                                        <th class='text-center'>Image</th>
                                        <th class='text-center'>Action</th>
                                    </tr>`);

                $("#tb-footer").html(`<tr>
                                        <th class='text-center'>Name variable</th>
                                        <th class='text-center'>Title product</th>
                                        <th class='text-center'>Total stock</th>
                                        <th class='text-center'>Unit price</th>
                                        <th class='text-center'>MRP</th>
                                        <th class='text-center'>Image</th>
                                        <th class='text-center'>Action</th>
                                    </tr>`)

                App.SweetAlert.showErrorAlert("Can not load this stock")
            })
    }

    function loadProductStockLock() {
        return $.ajax({
            type: "GET",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.getAllProductsCombinationLock
        })
            .done(function (data) {
                $("#div-table").html("");

                $("#div-table").html(` <table id="example" class="table table-striped data-table table-hover"
                                   style="width: 100%">
                                <thead class="t-head" id="tb-head">

                                </thead>

                                <tbody id="tb-show">

                                </tbody>

                                <tfoot id="tb-footer" style="text-align: center">

                                </tfoot>
                            </table>`)

                $("#tableOfContents").html("Product stock");

                $(".btn-add").addClass("hide");

                $("#tb-show").html("");
                $("#tb-head").html(`<tr>
                                        <th class='text-center'>Name variable</th>
                                        <th class='text-center'>Title product</th>
                                        <th class='text-center'>Total stock</th>
                                        <th class='text-center'>Unit price</th>
                                        <th class='text-center'>MRP</th>
                                        <th class='text-center'>Image</th>
                                        <th class='text-center'>Action</th>
                                    </tr>`);

                $("#tb-footer").html(`<tr>
                                        <th class='text-center'>Name variable</th>
                                        <th class='text-center'>Title product</th>
                                        <th class='text-center'>Total stock</th>
                                        <th class='text-center'>Unit price</th>
                                        <th class='text-center'>MRP</th>
                                        <th class='text-center'>Image</th>
                                        <th class='text-center'>Action</th>
                                    </tr>`)

                data.forEach(item => {
                    console.log(item)
                    productsCombination = item;

                    addRowProductCombinationLock();
                })

                $("#example").DataTable();
            })
            .fail(function (jqXHR) {

                console.log(jqXHR);

                $("#div-table").html("");

                $("#div-table").html(` <table id="example" class="table table-striped data-table table-hover"
                                   style="width: 100%">
                                <thead class="t-head" id="tb-head">

                                </thead>

                                <tbody id="tb-show">

                                </tbody>

                                <tfoot id="tb-footer" style="text-align: center">

                                </tfoot>
                            </table>`)

                $("#tableOfContents").html("Product stock");

                $(".btn-add").attr("id", "createSubcategory");

                $(".btn-add").addClass("hide");

                $("#addContent").html("Add new subcategory");

                $("#tb-show").html("");
                $("#tb-head").html(`<tr>
                                        <th class='text-center'>Name variable</th>
                                        <th class='text-center'>Title product</th>
                                        <th class='text-center'>Total stock</th>
                                        <th class='text-center'>Unit price</th>
                                        <th class='text-center'>MRP</th>
                                        <th class='text-center'>Image</th>
                                        <th class='text-center'>Action</th>
                                    </tr>`);

                $("#tb-footer").html(`<tr>
                                        <th class='text-center'>Name variable</th>
                                        <th class='text-center'>Title product</th>
                                        <th class='text-center'>Total stock</th>
                                        <th class='text-center'>Unit price</th>
                                        <th class='text-center'>MRP</th>
                                        <th class='text-center'>Image</th>
                                        <th class='text-center'>Action</th>
                                    </tr>`)

                App.SweetAlert.showErrorAlert("Can not load stock lock")
            })
    }

    function handleGroupModal() {
        handlePreviewProductCreate();
        handleRemoveImageProductCreate();
        handlePreviewProductUpdate();
        handleRemoveImageProductUpdate();
        handleLoadProduct();
        handleLoadProductLock();
        handleLoadCategoryLock();
        handleCreateProductModal();
        handleCreateCategoryModal();
        handleLoadCategory();
        handleCreateSubcategoryModal();
        handleLoadSubcategory();
        handleUpdateProductModal();
        handleCreateProductsCombination();
        handleUpdateProductsCombination();
        handleLoadProductsStock();
        handleUpdateCategoryModal();
        handleUpdateSubcategoryModal();
        handleSuspensionProductModal();
        handelSuspensionCategoryModal();
        handleRestoreCategoryModal();
        handleSuspensionSubcategoryModal();
        handleLoadSubcategoryLock();
        handleRestoreSubcategoryModal();
        handlePreviewProductCombinationCreate();
        handleRemoveImageProductCombinationCreate();
        handleRestoreProductModal();
        handleLoadProductsCombinationByProductId();
        handleLoadProductByCategoryId();
        handleLoadProductsStockLock();
    }

    //Handle button

    function handleLoadProduct() {
        $("#showProduct").on("click", function () {
            loadProduct();
        })
    }

    function handleLoadProductLock() {
        $("#showProductLock").on("click", function () {
            loadProductLock();
        })
    }

    function handleLoadProductByCategoryId() {
        $("#div-table").on("click", ".btn-show-products-by-category", function () {
            let id = $(this).data("id");
            loadProductByCategoryId(id);
        })
    }

    function handleLoadProductsStock() {
        $("#showAllStock").on("click", function () {
            loadProductsStock();
        })
    }

    function handleLoadProductsStockLock() {
        $("#showStockLock").on("click", function () {
            loadProductStockLock();
        })
    }

    function handleLoadProductsCombinationByProductId() {
        $("#div-table").on("click", ".btn-show-products-combination-by-id", function () {
            let id = $(this).data("id");
            loadProductStockByProductId(id);
        })
    }

    function handleCreateProductModal() {
        $(".card-body").on("click", "#createProduct", function () {
            drawCategory("#categoryProductCreate").then(function () {
                drawSubCategory("#subcategoryProductCreate", "#categoryProductCreate");
            });
            changeSubcategoryFollowCategory("#categoryProductCreate", "#subcategoryProductCreate");
            $("#createProductModal").modal("show");
        })
    }

    function handleUpdateProductModal() {
        $("#div-table").on("click", ".btn-updateProduct", function () {
            let id = $(this).data("id");
            drawCategory("#categoryProductUpdate").then(function () {
                findProductById(id).then(function () {
                    product.id = id;
                    $("#productTitleUpdate").val(product.title);
                    $("#categoryProductUpdate").val(product.category_id);
                    $("#descriptionProductUpdate").val(product.description);
                    $("#imagePreviewUpdate").attr("src", product.fileUrl);
                }).then(function () {
                    drawSubCategory("#subcategoryProductUpdate", "#categoryProductUpdate").then(function () {
                        $("#subcategoryProductUpdate").val(product.subcategory_id);
                        $("#updateProductModal").modal("show");

                        changeSubcategoryFollowCategory("#categoryProductUpdate", "#subcategoryProductUpdate");
                    });
                })

            });
        })
    }

    function handleSuspensionProductModal() {
        $("#div-table").on("click", ".btn-suspension-product", function () {
            App.SweetAlert.ShowConfirmSuspend("Do you want to lock this product?").then(result => {
                if (result.isConfirmed) {
                    let id = $(this).data("id");

                    product.id = id;
                    doSuspensionProduct(id);
                }
            })
        })
    }

    function handleRestoreProductModal() {
        $("#div-table").on("click", ".btn-restoreProduct", function () {
            App.SweetAlert.ShowConfirmSuspend("Do you want restore this product?").then(result => {
                if (result.isConfirmed) {
                    let id = $(this).data("id");
                    doRestoreProduct(id);
                }
            })
        })
    }

    function handleCreateCategoryModal() {
        $(".card-body").on("click", "#createCategory", function () {
            $("#createCategoryModal").modal("show");
        })
    }

    function handleUpdateCategoryModal() {
        $("#div-table").on("click", ".btn-updateCategory", function () {
            let id = $(this).data("id");
            findCategoryById(id).then(function () {
                category.id = id;

                $("#updateCategoryModal").modal("show");

                $("#nameCategoryUpdate").val(category.categoryName);
            })
        })

    }

    function handelSuspensionCategoryModal() {
        $("#div-table").on("click", ".btn-suspension-category", function () {
            App.SweetAlert.ShowConfirmSuspend("Do you want lock this category").then(result => {
                if (result.isConfirmed) {
                    let id = $(this).data("id");

                    category.id = id;
                    console.log("category id: " + id);

                    doSuspensionCategory(id);
                }
            })
        })
    }

    function handleRestoreCategoryModal() {
        $("#div-table").on("click", ".btn-restore-category", function () {
            App.SweetAlert.ShowConfirmSuspend("Do you want to restore this category").then(result => {
                if (result.isConfirmed) {
                    let id = $(this).data("id");
                    console.log(id)
                    doRestoreCategory(id);
                }
            })
        })
    }

    function handleLoadCategory() {
        $("#sidebar").on("click", "#showAllCategory", function () {
            loadCategory();

        })
    }

    function handleLoadCategoryLock() {
        $("#sidebar").on("click", "#showCategoryLock", function () {
            loadCategoryLock();
        })
    }

    function handleLoadSubcategory() {
        $("#sidebar").on("click", "#showAllSubcategory", function () {
            loadSubcategory();
        })
    }

    function handleLoadSubcategoryLock() {
        $("#sidebar").on("click", "#showAllSubcategoryLock", function () {
            loadSubcategoryLock();
        })
    }

    function handleCreateSubcategoryModal() {
        $(".card-body").on("click", "#createSubcategory", function () {
            $("#createSubcategoryModal").modal("show");
            drawCategory("#optionCategory");
        })
    }

    function handleUpdateSubcategoryModal() {
        $("#div-table").on("click", ".btn-updateSubcategory", function () {
            let id = $(this).data("id");
            findSubcategoryById(id).then(function () {
                console.log(subcategory);

                drawCategory("#optionCategoryUpdate").then(function () {
                    subcategory.id = id;

                    $("#nameSubcategoryUpdate").val(subcategory.subcategoryName);
                    $("#optionCategoryUpdate").val(subcategory.category_id);
                    $("#updateSubcategoryModal").modal("show");
                });
            })

        })
    }

    function handleSuspensionSubcategoryModal() {
        $("#div-table").on("click", ".btn-suspension-subcategory", function () {
            App.SweetAlert.ShowConfirmSuspend("Do you want to lock this subcategory?").then(result => {
                if (result.isConfirmed) {
                    let id = $(this).data("id");

                    console.log(id);

                    doSuspensionSubcategory(id);
                }
            })
        })
    }

    function handleRestoreSubcategoryModal() {
        $("#div-table").on("click", ".btn-restore-subcategory", function () {
            App.SweetAlert.ShowConfirmSuspend("Do you want to restore this subcategory").then(result => {
                if (result.isConfirmed) {
                    let id = $(this).data("id");

                    doRestoreSubcategory(id);
                }
            })
        })
    }

    function handleCreateProductsCombination() {
        $("#div-table").on("click", ".btn-createProductCombination", function () {
                let id = $(this).data("id");
                $("#colorCreate").empty();
                $("#sizeCreate").empty();
                findProductById(id).then(function () {

                        $("#productCombinationTitleCreate").val(product.title);


                        $("#categoryProductCombinationCreate").val(product.category_id);

                        $("#subcategoryProductCombinationCreate").val(product.subcategory_id);
                        drawColor("#colorCreate");
                        drawSize("#sizeCreate");
                        $("#productIdCreate").val(product.id);
                        $("#createProductsCombinationModal").modal("show");

                    }
                )
            }
        )
    }

    function handleUpdateProductsCombination() {
        $("#div-table").on("click", ".btn-updateProductsCombination", function () {
            let id = $(this).data("id");
            $("#sizeUpdate").empty();
            $("#colorUpdate").empty();
            // Mr Quang required commnet
            findProductsCombinationById(id).then(function () {
                productsCombination.id = id;
                $("#productStockId").val(id)
                $("#productIdUpdate").val(productsCombination.product_id);
                $("#productCombinationTitleUpdate").val(productsCombination.product_title);
                $("#unitPriceUpdate").val(productsCombination.unit_price);
                $("#quantityStockUpdate").val(productsCombination.total_stock);
                $("#maximumRetailPriceUpdate").val(productsCombination.maximum_retail_price);
                $("#imagePreviewProductsCombinationUpdate").attr("src", productsCombination.fileUrl);

                drawSize("#sizeUpdate").then(function () {
                    findValueColor(productsCombination.combination_string, "#colorUpdate");
                });
                drawColor("#colorUpdate").then(function () {
                    findValueSize(productsCombination.combination_string, "#sizeUpdate");
                });
                $("#updateProductsCombinationModal").modal("show");
            })
        })
    }

    function changeSubcategoryFollowCategory(elementCategory, elementSubcategory) {
        $(elementCategory).on("change", function () {
            drawSubCategory(elementSubcategory, elementCategory);
        })
    }

    // Gọi API để thực hiện nghiệp vụ
    function doCreateCategory() {
        category.id = 0;
        category.categoryName = $("#nameCategoryCreate").val();
        return $.ajax({
            type: "POST",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.createCategory,
            data: JSON.stringify(category)
        })
            .done(function (data) {
                category = data;
                addRowCategory();
                App.SweetAlert.showSuccessAlert("Create new category successful !!!");
                $("#createCategoryModal").modal("hide");
            })
            .fail(function (jqXHR) {
                console.log("jqXHR: ");
                console.log(jqXHR);
                App.SweetAlert.showErrorAlert("Cannot create new category !!!")

            })
    }

    function doUpdateCategory() {
        category.categoryName = $("#nameCategoryUpdate").val();
        $.ajax({
            type: "PUT",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.doUpdateCategory + category.id,
            data: JSON.stringify(category)
        })
            .done(function (data) {
                category = data;
                let currentRow = $("#tr_category_" + category.id);

                let updateRow = $(tempCategory(category.id, category.categoryName, category.quantity_product));

                currentRow.replaceWith(updateRow);

                App.SweetAlert.showSuccessAlert("Update category successful!!!");

                $("#updateCategoryModal").modal("hide");
            })
            .fail(function (jqXHR) {
                console.log(jqXHR);

                App.SweetAlert.showErrorAlert("Can not update category !!!")
            })
    }

    function doSuspensionCategory(id) {
        return $.ajax({
            type: "PUT",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.doSuspensionCategory + id
        })
            .done(function (data) {
                category.id = data;

                $("#tr_category_" + category.id).remove();

                App.SweetAlert.showSuccessAlert("Suspension this category")
            })
            .fail(function (jqXHR) {
                console.log(jqXHR);

                App.SweetAlert.showErrorAlert("Can not suspension this category");
            })
    }

    function doRestoreCategory(id) {
        return $.ajax({
            type: "PUT",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.doRestoreCategory + id
        })
            .done(function (data) {

                console.log(data)
                category.id = data;

                $("#tr_category_lock_" + category.id).remove();

                App.IziToast.showSuccessAlert("Restore this category successful")
            })
            .fail(function (jqXHR) {
                console.log(jqXHR);

                App.SweetAlert.showErrorAlert("Can not restore this category")
            })
    }

    function doCreateSubcategory() {
        subcategory.id = 0;
        subcategory.subcategoryName = $("#nameSubcategoryCreate").val();
        subcategory.category_id = $("#optionCategory").val()
        return $.ajax({
            type: "POST",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            data: JSON.stringify(subcategory),
            url: page.urls.createSubcategory,
        })
            .done(function (data) {
                subcategory = data;
                addRowSubcategory();
                $("#createSubcategoryModal").modal("hide");
                App.SweetAlert.showSuccessAlert("Create new subcategory successful!!!")

            })
            .fail(function (jqXHR) {
                console.log(jqXHR);
                App.SweetAlert.showErrorAlert("Can not create new subcategory");
            })
    }

    function doUpdateSubcategory() {
        subcategory.subcategoryName = $("#nameSubcategoryUpdate").val();
        subcategory.category_id = $("#optionCategoryUpdate").val();

        return $.ajax({
            type: "PUT",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.doUpdateSubcategory + subcategory.id,
            data: JSON.stringify(subcategory)
        })
            .done(function (data) {
                subcategory = data;

                let currentRow = $("#tr_subcategory_" + subcategory.id)

                let updateRow = $(tempSubcategory(subcategory.id, subcategory.subcategoryName, subcategory.categoryName));

                currentRow.replaceWith(updateRow);

                App.SweetAlert.showSuccessAlert("Update subcategory successful !!!");

                $("#updateSubcategoryModal").modal("hide")

            })
            .fail(function (jqXHR) {
                console.log(jqXHR);
                App.SweetAlert.showErrorAlert("Can not update category");
            })
    }

    function doSuspensionSubcategory(id) {
        return $.ajax({
            type: "PUT",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.doSuspensionSubcategory + id
        })
            .done(function (data) {
                subcategory.id = data;

                $("#tr_subcategory_" + subcategory.id).remove();

                App.SweetAlert.showSuccessAlert("Suspension this subcategory successful!!!")
            })
            .fail(function (jqXHR) {
                console.log(jqXHR);

                App.SweetAlert.showErrorAlert("Can not suspention this subcategory")
            })
    }

    function doRestoreSubcategory(id) {
        return $.ajax({
            type: "PUT",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.doRestoreSubcategory + id,
        })
            .done(function (data) {
                subcategory.id = data;

                console.log("subcategory id: " + data);

                $("#tr_subcategory_lock_" + subcategory.id).remove();

                App.IziToast.showSuccessAlert("Restore subcategory successful!!!")
            })
            .fail(function (jqXHR) {

                console.log(jqXHR);

                App.SweetAlert.showErrorAlert("Can not restore subcategory");
            })
    }

    function doCreateProduct() {
        let formData = new FormData();
        formData.append("title", $("#productTitleCreate").val().toString());
        formData.append("category_id", $("#categoryProductCreate").val().toString());
        formData.append("subcategory_id", $("#subcategoryProductCreate").val().toString());
        formData.append("description", $("#descriptionProductCreate").val().toString());
        formData.append("multipartFile", $("#imageFileCreate")[0].files[0]);
        if ($("#imageFileCreate")[0].files[0] == undefined) {

            $(".loader").removeClass("hide");
            $("#btnCreateProduct").prop("disable", true);

            product.title = $("#productTitleCreate").val();
            product.category_id = $("#categoryProductCreate").val();
            product.subcategory_id = $("#subcategoryProductCreate").val();
            product.description = $("#descriptionProductCreate").val();
            $.ajax({
                type: "POST",
                headers: {
                    "Content-Type": "Application/json",
                    "Accept": "Application/json"
                },
                url: page.urls.doCreateProductNoImage,
                data: JSON.stringify(product)
            })
                .done(function (data) {
                    product = data;

                    addRowProduct();

                    App.SweetAlert.showSuccessAlert("Create new product successful!!!");

                    $("#createProductModal").modal("hide");


                })
                .fail(function (jqXHR) {

                    console.log(jqXHR);

                    removeImage("#imageFileCreate", "#imagePreviewCreate");

                    App.SweetAlert.showErrorAlert("Can not create new product")

                })
                .always(function () {
                    $(".loader").addClass("hide");
                    $("#btnCreateProduct").prop("disable", false);
                })
        } else {
            $(".loader").removeClass("hide");
            $("#btnCreateProduct").prop("disable", true);
            $.ajax({
                type: "POST",
                contentType: false,
                cache: false,
                processData: false,
                url: page.urls.doCreateProduct,
                data: formData,
            })
                .done(function (data) {
                    product = data;
                    addRowProduct();
                    App.SweetAlert.showSuccessAlert("Create product successful!!!");
                    removeImage("#imageFileCreate", "#imagePreviewCreate");
                    $("#createProductModal").modal("hide");
                })
                .fail(function (jqXHR) {
                    console.log(jqXHR);
                    App.SweetAlert.showErrorAlert("Can not create new product");
                })
                .always(function () {
                    $(".loader").addClass("hide");
                    $("#btnCreateProduct").prop("disable", false);
                })
        }


    }

    function doUpdateProduct() {
        let formData = new FormData();
        formData.append("title", $("#productTitleUpdate").val().toString());
        formData.append("category_id", $("#categoryProductUpdate").val().toString());
        formData.append("subcategory_id", $("#subcategoryProductUpdate").val().toString());
        formData.append("description", $("#descriptionProductUpdate").val().toString());
        formData.append("multipartFile", $("#imageFileUpdate")[0].files[0]);
        console.log("product id : " + product.id)
        if ($("#imageFileUpdate")[0].files[0] == undefined) {

            $(".loader").removeClass("hide");
            $("#btnUpdateProduct").prop("disable", true);

            let formDataNoImage = new FormData();
            formDataNoImage.append("title", $("#productTitleUpdate").val().toString());
            formDataNoImage.append("category_id", $("#categoryProductUpdate").val().toString());
            formDataNoImage.append("subcategory_id", $("#subcategoryProductUpdate").val().toString());
            formDataNoImage.append("description", $("#descriptionProductUpdate").val().toString());

            $.ajax({
                type: "PUT",
                contentType: false,
                cache: false,
                processData: false,
                url: page.urls.doUpdateProductNoImage + product.id,
                data: formDataNoImage,
            })
                .done(function (data) {
                    product = data;
                    let image_thumbnail = App.BASE_URL_CLOUD_IMAGE + "/" + App.BASE_SCALE_IMAGE + "/" + product.fileFolder + "/" + product.fileName;
                    let currentRow = $("#tr_product_" + product.id);
                    let updateRow = $(tempProduct(product.id, product.title, product.category_name, product.subcategory_name, product.description, image_thumbnail))
                    currentRow.replaceWith(updateRow);
                    App.SweetAlert.showSuccessAlert("Update product successful!!!");
                    removeImage("#imageFileUpdate", "#imagePreviewUpdate");
                    $("#updateProductModal").modal("hide");
                })
                .fail(function (jqXHR) {
                    console.log(jqXHR);
                    App.SweetAlert.showErrorAlert("Can not update new product");
                })
                .always(function () {
                    $(".loader").addClass("hide");
                    $("#btnUpdateProduct").prop("disable", false);
                })
        } else {
            $(".loader").removeClass("hide");
            $("#btnUpdateProduct").prop("disable", true);

            $.ajax({
                type: "PUT",
                contentType: false,
                cache: false,
                processData: false,
                url: page.urls.doUpdateProduct + product.id,
                data: formData,
            })
                .done(function (data) {
                    product = data;
                    let image_thumbnail = App.BASE_URL_CLOUD_IMAGE + "/" + App.BASE_SCALE_IMAGE + "/" + product.fileFolder + "/" + product.fileName;
                    let currentRow = $("#tr_product_" + product.id);
                    let updateRow = $(tempProduct(product.id, product.title, product.category_name, product.subcategory_name, product.description, image_thumbnail))
                    currentRow.replaceWith(updateRow);
                    App.SweetAlert.showSuccessAlert("Update product successful!!!");
                    removeImage("#imageFileUpdate", "#imagePreviewUpdate");
                    $("#updateProductModal").modal("hide");
                })
                .fail(function (jqXHR) {
                    console.log(jqXHR);
                    App.SweetAlert.showErrorAlert("Can not update new product");
                })
                .always(function () {
                    $(".loader").addClass("hide");
                    $("#btnUpdateProduct").prop("disable", false);
                })
        }

    }

    function doSuspensionProduct(id) {
        return $.ajax({
            type: "PUT",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.doSuspensionProduct + id,
        })
            .done(function (data) {
                product.id = data

                $("#tr_product_" + product.id).remove();

                App.SweetAlert.showSuccessAlert("Suspension product successful!!!")
            })
            .fail(function (jqXHR) {
                console.log(jqXHR);

                App.SweetAlert.showErrorAlert("Can not suspension this product")
            })
    }

    function doRestoreProduct(id) {
        return $.ajax({
            type: "PUT",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.doRestoreProduct + id
        })
            .done(function (data) {
                product.id = data;

                $("#tr_product_lock_" + product.id).remove();

                App.IziToast.showSuccessAlert("Restore this product successful!!")
            })
            .fail(function (jqXHR) {
                console.log(jqXHR);

                App.SweetAlert.showErrorAlert("Can not restore this product!!!")
            })
    }

    function doCreateProductCombination() {

        $(".loader").removeClass("hide");
        $("#btnCreateProductCombination").prop("disable", true);

        let formData = new FormData();
        formData.append("product_title", $("#productCombinationTitleCreate").val().toString());
        formData.append("product_id", $("#productIdCreate").val().toString());
        formData.append("color", $("#colorCreate").val().toString());
        formData.append("size", $("#sizeCreate").val().toString());
        formData.append("unit_price", $("#unitPriceCreate").val().toString());
        formData.append("total_stock", $("#quantityStockCreate").val().toString());
        formData.append("maximum_retail_price", $("#maximumRetailPriceCreate").val().toString());
        formData.append("multipartFile", $("#imageFileProductCombinationCreate")[0].files[0]);

        if ($("#imageFileProductCombinationCreate")[0].files[0] == undefined) {

            productsCombination.product_title = $("#productCombinationTitleCreate").val();
            productsCombination.product_id = $("#productIdCreate").val();
            productsCombination.color = $("#colorCreate").val();
            productsCombination.size = $("#sizeCreate").val();
            productsCombination.unit_price = $("#unitPriceCreate").val();
            productsCombination.total_stock = $("#quantityStockCreate").val();
            productsCombination.maximum_retail_price = $("#maximumRetailPriceCreate").val();

            console.log("productCombination: " + productsCombination)
            console.log($("#productCombinationTitleCreate").val());
            console.log($("#unitPriceCreate").val());
            console.log(productsCombination);


            return $.ajax({
                type: "POST",
                headers: {
                    "Content-Type": "Application/json",
                    "Accept": "Application/json"
                },
                url: page.urls.doCreateProductCombinationNoImage,
                data: JSON.stringify(productsCombination)
            })
                .done(function (data) {

                    App.SweetAlert.showSuccessAlert("Create new variable successful!!!");

                    removeImage("#imageFileProductCombinationCreate", "#imagePreviewProductsCombinationCreate");

                    $("#createProductsCombinationModal").modal("hide");
                })
                .fail(function (jqXHR) {
                    console.log(jqXHR);

                    App.SweetAlert.showErrorAlert("Can not create new variable")
                })
                .always(function () {
                    $(".loader").addClass("hide");
                    $("#btnCreateProductCombination").prop("disable", false);
                })

        } else {

            return $.ajax({
                type: "POST",
                contentType: false,
                cache: false,
                processData: false,
                url: page.urls.doCreateProductCombination,
                data: formData,
            })
                .done(function (data) {
                    productsCombination = data;

                    // addRowProductCombination();

                    App.SweetAlert.showSuccessAlert("Create new variable successful !!!");

                    removeImage("#imageFileProductCombinationCreate", "#imagePreviewProductsCombinationCreate");

                    $("#createProductsCombinationModal").modal("hide");
                })
                .fail(function (jqXHR) {
                    console.log(jqXHR);

                    App.SweetAlert.showErrorAlert("Can not create!!!")
                })
                .always(function () {
                    $(".loader").addClass("hide");
                    $("#btnCreateProductCombination").prop("disable", false);
                })
        }

    }

    function doUpdateProductCombination() {
        $(".loader").removeClass("hide");
        $("#btnUpdateProduct").prop("disable", true);

        let formData = new FormData();
        formData.append("product_title", $("#productCombinationTitleUpdate").val().toString());
        formData.append("product_id", $("#productIdUpdate").val().toString());
        formData.append("color", $("#colorUpdate").val().toString());
        formData.append("size", $("#sizeUpdate").val().toString());
        formData.append("unit_price", $("#unitPriceUpdate").val().toString());
        formData.append("total_stock", $("#quantityStockUpdate").val().toString());
        formData.append("maximum_retail_price", $("#maximumRetailPriceUpdate").val().toString());
        formData.append("multipartFile", $("#imageFileProductCombinationUpdate")[0].files[0]);

        if ($("#imageFileProductCombinationUpdate")[0].files[0] == undefined) {
            let formDataNoImage = new FormData();
            formDataNoImage.append("product_title", $("#productCombinationTitleUpdate").val().toString());
            formDataNoImage.append("product_id", $("#productIdUpdate").val().toString());
            formDataNoImage.append("color", $("#colorUpdate").val().toString());
            formDataNoImage.append("size", $("#sizeUpdate").val().toString());
            formDataNoImage.append("unit_price", $("#unitPriceUpdate").val().toString());
            formDataNoImage.append("total_stock", $("#quantityStockUpdate").val().toString());
            formDataNoImage.append("maximum_retail_price", $("#maximumRetailPriceUpdate").val().toString());
            return $.ajax({
                type: "PUT",
                contentType: false,
                cache: false,
                processData: false,
                url: page.urls.doUpdateProductCombinationNoImage + productsCombination.id,
                data: formDataNoImage
            })
                .done(function (data) {
                    productsCombination = data;

                    let currentRow = $("#tr_product_combination_" + productsCombination.id);

                    let image_thumbnail = App.BASE_URL_CLOUD_IMAGE + "/" + App.BASE_SCALE_IMAGE + "/" + productsCombination.fileFolder + "/" + productsCombination.fileName;

                    let updateRow = $(tempProductsCombination(productsCombination.id, productsCombination.combination_string, productsCombination.product_title,
                        productsCombination.total_stock, formatMoney(productsCombination.unit_price), formatMoney(productsCombination.maximum_retail_price), image_thumbnail));

                    currentRow.replaceWith(updateRow);

                    App.SweetAlert.showSuccessAlert("Update this variable successful!!!");

                    removeImage();

                    $("#updateProductsCombinationModal").modal("hide");

                })
                .fail(function (jqXHR) {
                    console.log(jqXHR);

                    App.SweetAlert.showErrorAlert("Can not update this variable");

                })
                .always(function () {
                    $(".loader").addClass("hide");
                    $("#btnUpdateProduct").prop("disable", false);
                })

        } else {

        }
    }

    function resetModal(formElement) {
        $(formElement)[0].reset();
        $(formElement).validate().resetForm();
        $(formElement + ' input.error').removeClass("error");
    }

    function closeModal(modal, formElement) {
        $(modal).on("hidden.bs.modal", function () {
            $(modal + ' .modal-alert-danger').empty().removeClass('show').addClass('hide');
            resetModal(formElement);
        });
    }

    closeModal("#createProductModal", "#frmCreateProduct");

    closeModal("#updateProductModal", "#frmUpdateProduct")

    closeModal("#createCategoryModal", "#frmCreateCategory");

    closeModal("#updateCategoryModal", "#frmUpdateCategory");

    closeModal("#createSubcategoryModal", "#frmCreateSubcategory");

    closeModal("#updateSubcategory", "#frmUpdateSubcategory");

    closeModal("#createProductsCombinationModal", "#frmCreateProductCombination");


    $("#frmCreateProduct").validate({
        rules: {
            productTitleCreate: {
                required: true
            },
            categoryProductCreate: {
                required: true
            },
            subcategoryProductCreate: {
                required: true
            }
        },
        message: {
            productTitleCreate: {
                required: "Field title can not empty"
            },
            categoryProductCreate: {
                required: "Field category can not empty"
            },
            subcategoryProductCreate: {
                required: "Field subcategory can not empty"
            }
        },
        submitHandler: function () {
            doCreateProduct();
        }
    })

    $("#frmUpdateProduct").validate({
        rules: {
            productTitleUpdate: {
                required: true
            },
            categoryProductUpdate: {
                required: true
            },
            subcategoryProductUpdate: {
                required: true
            }
        },

        message: {
            productTitleUpdate: {
                required: "Field title can not empty"
            },
            categoryProductUpdate: {
                required: "Field category can not empty"
            },
            subcategoryProductUpdate: {
                required: "Field subcategory can not empty"
            }
        },

        submitHandler: function () {
            doUpdateProduct();
        }
    })

    $("#frmCreateCategory").validate({
        rules: {
            nameCategoryCreate: {
                required: true
            }
        },

        message: {
            nameCategoryCreate: {
                required: 'This field can not empty!!!!'
            }
        },
        submitHandler: function () {
            doCreateCategory();
        }
    })

    $("#frmUpdateCategory").validate({
        rules: {
            nameCategoryCreate: {
                required: true
            }
        },

        message: {
            nameCategoryCreate: {
                required: "This field can not empty !!!"
            }
        },

        submitHandler: function () {
            doUpdateCategory();
        }
    })

    $("#frmCreateSubcategory").validate({
        rules: {
            nameSubcategoryCreate: {
                required: true
            }
        },
        message: {
            nameSubcategoryCreate: {
                required: "This field can not be empty!!!"
            }
        },
        submitHandler: function () {
            doCreateSubcategory();
        }
    })

    $("#frmUpdateSubcategory").validate({
        rules: {
            nameSubcategoryUpdate: {
                required: true
            },
            optionCategoryUpdate: {
                required: true
            }
        },

        message: {
            nameSubcategoryUpdate: {
                required: "This field can not empty"
            },
            optionCategoryUpdate: {
                required: "This field can not empty"
            }
        },

        submitHandler: function () {
            doUpdateSubcategory();
        }
    })

    $("#frmCreateProductCombination").validate({
        rules: {
            productCombinationTitleCreate: {
                required: true
            },

            colorCreate: {
                required: true
            },

            sizeCreate: {
                required: true
            },

            unitPriceCreate: {
                required: true,

                min: 10000,

                max: 100000000000
            },

            quantityStockCreate: {
                required: true,

                min: 0,

                max: 1000000
            },

            maximumRetailPriceCreate: {
                required: true,

                min: 10000,

                max: 100000000000
            }
        },

        message: {
            productCombinationTitleCreate: {
                required: "This field can not empty"
            },

            colorCreate: {
                required: "This field can not empty"
            },

            sizeCreate: {
                required: "This field can not empty"
            },

            unitPriceCreate: {
                required: "This field can not empty",

                min: "The unit price min is 10 000 ",

                max: "The unit price max is 100 000 000 000"
            },

            quantityStockCreate: {
                required: "This field can not empty",

                min: "The quantity min is 0",

                max: "The quantity max is 1000000"
            },

            maximumRetailPriceCreate: {
                required: "This field can not empty",

                min: "The maximum retail price min is 10 000 ",

                max: "The maximum retail price max is 100 000 000 000"
            }
        },

        submitHandler: function () {
            doCreateProductCombination();
        }
    })

    $("#frmUpdateProductCombination").validate({
        rules: {
            productCombinationTitleUpdate: {
                required: true
            },

            colorUpdate: {
                required: true
            },

            sizeUpdate: {
                required: true
            },

            unitPriceUpdate: {
                required: true,

                min: 10000,

                max: 100000000000
            },

            quantityStockUpdate: {
                required: true,

                min: 0,

                max: 1000000
            },

            maximumRetailPriceUpdate: {
                required: true,

                min: 10000,

                max: 100000000000
            }
        },
        message: {
            productCombinationTitleUpdate: {
                required: "This field can not empty"
            },

            colorUpdate: {
                required: "This field can not empty"
            },

            sizeUpdate: {
                required: "This field can not empty"
            },

            unitPriceUpdate: {
                required: "This field can not empty",

                min: "The unit price min is 10 000 ",

                max: "The unit price max is 100 000 000 000"
            },

            quantityStockUpdate: {
                required: "This field can not empty",

                min: "The quantity min is 0",

                max: "The quantity max is 1000000"
            },

            maximumRetailPriceUpdate: {
                required: "This field can not empty",

                min: "The maximum retail price min is 10 000 ",

                max: "The maximum retail price max is 100 000 000 000"
            }
        },

        submitHandler: function () {
            doUpdateProductCombination();
        }


    })

    $("#btnCreateProduct").on("click", function () {
        console.log("Vao chua")
        $("#frmCreateProduct").submit();
    })

    $("#btnUpdateProduct").on("click", function () {
        $("#frmUpdateProduct").submit();
    })

    $("#btnCreateCategory").on("click", function () {
        $("#frmCreateCategory").submit();
    })

    $("#btnUpdateCategory").on("click", function () {
        $("#frmUpdateCategory").submit();
    })

    $("#btnCreateSubcategory").on("click", function () {
        $("#frmCreateSubcategory").submit();
    })

    $("#btnUpdateSubcategory").on("click", function () {
        $("#frmUpdateSubcategory").submit();
    })

    $("#btnCreateProductCombination").on("click", function () {
        $("#frmCreateProductCombination").submit();
    })

    $("#btnUpdateProductCombination").on("click", function () {
        $("#frmUpdateProductCombination").submit();
    })

    function previewUploadImage(elementFileImage, elementImage) {
        let imageSrc = $(elementFileImage)[0].files[0];
        if (imageSrc) {
            let reader = new FileReader();
            reader.readAsDataURL(imageSrc);
            reader.onload = function () {
                $(elementImage).attr("src", this.result);
            }
        }
    }

    function handlePreviewProductCreate() {
        $("#imageFileBtnCreate").on("click", function () {
            $("#imageFileCreate").click();
            $("#imageFileCreate").on("change", function () {
                previewUploadImage("#imageFileCreate", "#imagePreviewCreate");

            })
        })
    }

    function handlePreviewProductUpdate() {
        $("#imageFileBtnUpdate").on("click", function () {
            $("#imageFileUpdate").click();
            $("#imageFileUpdate").on("change", function () {
                previewUploadImage("#imageFileUpdate", "#imagePreviewUpdate");
            })
        })
    }

    function handlePreviewProductCombinationCreate() {
        $("#imageFileBtnProductsCombinationCreate").on("click", function () {
            $("#imageFileProductCombinationCreate").click();
            $("#imageFileProductCombinationCreate").on("change", function () {
                previewUploadImage("#imageFileProductCombinationCreate", "#imagePreviewProductsCombinationCreate")
            })
        })
    }

    function removeImage(elementFileImage, elementImage) {
        $(elementImage).attr("src", "#");
        $(elementFileImage).val("");
    }

    function handleRemoveImageProductCreate() {
        $("#cancelImageCreate").on("click", function () {
            removeImage("#imageFileCreate", "#imagePreviewCreate");
        })
    }

    function handleRemoveImageProductUpdate() {
        $("#cancelImageUpdate").on("click", function () {
            removeImage("#imageFileUpdate", "#imagePreviewUpdate");
        })
    }

    function handleRemoveImageProductCombinationCreate() {
        $("#cancelImageProductsCombinationCreate").on("click", function () {
            removeImage("#imageFileProductCombinationCreate", "#imagePreviewProductsCombinationCreate");
        })
    }

    function findValueColor(product_combination, element) {
        let arr = [];
        arr = product_combination.split("_");
        $.ajax({
            type: "GET",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.getColor
        })
            .done(function (data) {
                data.forEach(item => {
                    color = item;
                    if (color.color_name == arr[0]) {
                        $(element).val(color.id)
                    }
                })
            })
    }

    function findValueSize(product_combination, element) {
        let arr = [];
        arr = product_combination.split("_");
        $.ajax({
            type: "GET",
            headers: {
                "Content-Type": "Application/json",
                "Accept": "Application/json"
            },
            url: page.urls.getSize
        })
            .done(function (data) {
                data.forEach(item => {
                    size = item;
                    if (size.size_name == arr[1]) {
                        $(element).val(size.id);

                    }
                })
            })
    }

    function formatMoney(money) {
        return new Intl.NumberFormat('vi-VN', {style: 'currency', currency: 'VND'}).format(money)
    }

    loadProduct().then(function () {
        handleGroupModal();
    })


</script>

</body>

</html>